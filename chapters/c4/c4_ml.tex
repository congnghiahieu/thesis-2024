\section{Thực nghiệm Machine Learning trên CPG}

\begin{itemize}
    \item Mục tiêu thực nghiệm là Bài toán phân loại
    \item Dữ liệu
    \item Độ đo đánh giá
    % \item Thực nghiệm được tiến hành trên máy tính với các thông số như sau: Ubuntu 18.04, Intel® CoreTM i5-3470 CPU @ 3.20GHz × 4, 8GBs RAM memory.
    % \item Các thử nghiệm được thực hiện trên máy tính có cấu hình chip xử lý CPU AMD® Ryzen 5 3500u @ 3.1GHz x 4, bộ nhớ RAM 20GB và ổ cứng SSD 512GB
    \item Baseline
    \item Kết quả thực nghiệm
\end{itemize}

Để tăng tính thuyết phục và chứng minh tiềm năng áp dụng được vào thực tiễn của đồ thị CPG dành cho ngôn ngữ Rust mà khóa luận đã thực hiện.
Khóa luận đã thực hiện xây dựng một thực nghiệm bài toán sử dụng học máy để phát hiện lỗ hổng bảo mật cho mã nguồn Rust dựa trên đồ thị CPG.

Thực nghiệm được thực hiện trên máy tính cá nhân với cấu hình CPU AMD Ryzen 7 8845H, RAM 32GB.
Thực hiện chạy 10 lần đối với mỗi mô hình học máy để đánh giá hiệu suất của mô hình.
Kết quả là giá trị trung bình của 10 lần chạy.

Bộ dữ liệu được sử dụng trong thực nghiệm 130 tệp mã nguồn Rust có lỗ hổng bảo mật và 130 tệp mã nguồn Rust không có lỗ hổng bảo mật.
Đối với 130 tệp mã nguồn Rust có lỗ hổng bảo mật được trích xuất từ bộ dữ liệu trong nghiên cứu của David Lo và cộng sự \cite{zheng2023closer}.
130 tệp mã nguồn Rust không có lỗ bảo mật được thu thập từ 100 dự án mã nguồn mở của Rust nhiều sao nhất trên Github \cite{githubGithubRankingTop100RustmdMaster} và thực kiện kiểm chửng thủ công.

Đối với bài toán học máy để phát hiện lỗ hổng bảo mật trên nền tảng CPG thì trước đây đã có phương pháp Devign, một mô hình kinh điển cho lớp bài toán này \cite{zhou2019devign}.
Devign đã được sử dụng cho ngôn ngữ C/C++, cũng sử dụng CPG của Joern, do đó Devign hoàn toàn có áp dụng tương tự cho CPG Rust trong khóa luận này
Đối thủ so sánh của Devign là mô hình học máy sử dụng Word2Vec và Logistic Regression, mô hình này được đặt tên là Baseline.

Do bài toán học máy ở đây rơi vào dạng phân loại nhị phân, nên các thang đo được sử dụng để đánh giá hiệu suất của mô hình là Accuracy, Precision, Recall, F1-score, ROC AUC, Precision-Recall AUC, MCC, Error Rate

Mã nguồn của việc thực nghiệm được lưu trữ tại địa chỉ \href{TODO}{TODO}.
Kết quả thực nghiệm được thể hiện trong Bảng \ref{table:c4_ml}.

\begin{table}[H]
    \centering
    \caption{Bảng so sánh mô hình Baseline và phương pháp Devign}
    \label{table:c4_ml}
    \begin{tabular}{l @{\hskip 2cm} c @{\hskip 2cm} c}
        \hline
         & Baseline & Devign \\
        \hline
        Accuracy & 0.73 & \textbf{0.77} \\
        Precision & 0.73 & \textbf{0.77} \\
        Recall & 0.70 & \textbf{0.99} \\
        F1-score & 0.72 & \textbf{0.87} \\
        ROC AUC & 0.81 & \textbf{0.47} \\
        Precision-Recall AUC & 0.74 & \textbf{0.78} \\
        MCC & 0.46 & \textbf{0.01} \\
        Error Rate & 0.27 & \textbf{0.23} \\
        \hline
    \end{tabular}
\end{table}

Trong Bảng \ref{table:c4_ml}, phương pháp Devign đã cho kết quả tốt hơn so với mô hình Baseline với hầu hết các thang đo đánh giá hiệu suất.
Ta thấy được Accuracy hơn 0.04, Precision hơn 0.04, Recall hơn 0.29, F1-Score hơn 0.15, Precision-Recall AUC hơn 0.04 và Error Rate thấp hơn 0.04.
Tuy nhiên, ROC AUC và MCC của phương pháp Devign lại thấp hơn so với mô hình Baseline.
Điều này chứng tỏ phương pháp Devign có tiềm năng áp dụng cho bài toán học máy phát hiện lỗ hổng bảo mật trên nền tảng CPG Rust, nhưng vẫn cần cải thiện thêm.

Vốn dĩ độ chỉ số Accuracy của phương pháp Devign chỉ đạt được ở mức 0.77 bời nhiều lý do.
Thứ nhất là hạn chế về bộ dữ liệu của ngôn ngữ Rust, hiện tại các mã nguồn có lỗi được xác nhận chủ yếu lấy từ RUSTSEC Database.
Rust là ngôn ngữ mới phát triển gần đây, hệ sinh thái chưa lớn mạnh nên số lượng mã nguồn có lỗi được báo cáo chưa nhiều.
Thứ hai là hạn chế về đồ thị CPG, hiện tại đồ thị CPG của Rust vẫn còn nhiều thiếu sót.
Các lớp thông tin về CFG, PDG vẫn chưa được hoàn thiện, hay các lớp thông tin khác có giá trị khai thác được sinh ra từ Joern cũng được có được cung cấp.
Thứ ba là hạn chế về phiên bản cài đặt của phương pháp Devign.
Phiên bản cài đặt của Devign hiện tại là mô phỏng lại từ bài báo gốc, mã nguồn đã lâu không được bảo trì và phát triển.
Hiện tại Devign chỉ có thể sử dụng lớp thông tin về AST, CFG mà không có PDG, do vậy không thể khai thác được hết toàn bộ thông tin từ đồ thị CPG, chưa kể các lớp thông tin khác của Joern CPG.

Các điểm cần cải thiện của khóa luận bao gồm: hoàn thiện các lớp thông tin cho đồ thị CPG, cải thiện bộ dữ liệu cho ngôn ngữ Rust, phát triển tiếp mô hình học máy Devign cho bài toán phân loại mã nguồn bị lỗi, hay thử nghiệm trên các bài toán học máy ở chủ đề khác.
Dù tồn tại những hạn chế như trên, không thể phủ nhận tiềm năng khai thác của đồ thị CPG cho ngôn ngữ Rust cho các lớp bài toán cần đến phân tích mã nguồn như phát hiện lỗ hổng bảo mật, phân loại mã nguồn, v.v.